# Copyright 2022 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     https://www.apache.org/licenses/LICENSE-2.0
#
#     Unless required by applicable law or agreed to in writing, software
#     distributed under the License is distributed on an "AS IS" BASIS,
#     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#     See the License for the specific language governing permissions and
#     limitations under the License.

âŸ¨TestSuiteâŸ© â† â€¢Import "../test.bqn"

ts â† TestSuite "Lists"


# There are multiple ways to format lists in BQN.  The first, and likely most
# familiar, format is a comma-separated list enclosed by âŸ¨âŸ©.
#
# To examine lists more closely, we'll need some functions that operate on lists.
# The monadic function â‰  (Length), gives the length of a list.

{ ğ•¤ â‹„ âˆ = â‰  âŸ¨âŸ© } ts._Test "Empty list length"
{ ğ•¤ â‹„ âˆ = â‰  âŸ¨1âŸ© } ts._Test "Single item list length"
{ ğ•¤ â‹„ âˆ = â‰  âŸ¨1, 2âŸ© } ts._Test "Two-item list length"
{ ğ•¤ â‹„ (â‰  âŸ¨1, 2âŸ©) = â‰  âŸ¨4, 5, 6âŸ© } ts._Test "Lists of same length"
{ ğ•¤ â‹„ âˆ = â‰  âŸ¨âŸ¨âŸ©, âŸ¨âŸ©âŸ© } ts._Test "Nested lists"


# List equality can be checked using the dyadic function, â‰¡ (Match).

{ ğ•¤ â‹„ âŸ¨âˆ, 2âŸ© â‰¡ âŸ¨1, 2âŸ© } ts._Test "List equality"
{ ğ•¤ â‹„ âŸ¨ âŸ¨1, 3âŸ© âŸ© â‰¡ âŸ¨ âŸ¨1, âŸ¨âŸ©, 3âŸ© âŸ© } ts._Test "Nested lists"


# The related function, â‰¢ (Not Match) checks if two lists are not equal.

{ ğ•¤ â‹„ âŸ¨1, 2âŸ© â‰¢ âŸ¨1, 2âŸ©} ts._Test "List inequality"


# In addition to commas, newlines or â‹„ can be used as a separator. These
# separators can be mixed and matched.

{ ğ•¤ â‹„ âŸ¨1 â‹„ 2âŸ© â‰¡ âŸ¨1, 2, 3âŸ© } ts._Test "â‹„ separator"

{ ğ•¤ â‹„ âŸ¨1
       3âŸ© â‰¡ âŸ¨1, 2, 3âŸ© } ts._Test "Newline separator"

{ ğ•¤ â‹„ âŸ¨1 â‹„ 2 , âˆ
       4âŸ© â‰¡ âŸ¨1, 2, 3, 4âŸ© } ts._Test "â‹„ and , as separators"


# Multiple separators can be used between items in a list.

{ ğ•¤ â‹„ âŸ¨1 â‹„ 2âŸ© â‰¡ âŸ¨1 â‹„ â‹„ 2

       3âŸ©} ts._Test "Multiple separators"

{ ğ•¤ â‹„ âŸ¨ 1 âŸ© â‰¡ âŸ¨1, â‹„
               2 âŸ© } ts._test "Multiple mixed separators"


# Another way to write lists is strand notation.  In strand notation, list items
# are separated by â€¿. Strand notation is convenient in many circumstances,
# because it doesn't require enclosing symbols.

{ ğ•¤ â‹„ âŸ¨âŸ© â‰¡ 1â€¿2 } ts._Test "Strand notation"
{ ğ•¤ â‹„ âŸ¨ âŸ¨ 1 âŸ© âŸ© â‰¡ âŸ¨ 1â€¿2 âŸ© } ts._Test "Nested strand"


# Strand notation, though, sometimes requires parentheses on elements where other
# notations may not require them, such as when they are non-trivial expressions.

{ ğ•¤ â‹„ 3â€¿âˆ â‰¡ (1 + 2)â€¿(3 + 4) } ts._Test "Strand with diadic subexpressions"
{ ğ•¤ â‹„ 2â€¿âˆ â‰¡ ( âˆš 4 )â€¿( Ã— Â¯1 ) } ts._Test "Strand monadic subexpressions"


# A string is a list of characters.  With string notation, characters have no
# delimiters, and are surrounded by " and ".  Characters are written with
# surrounding single quotation marks.

{ ğ•¤ â‹„ 'b'â€¿'q'â€¿'n' â‰¡ "bq" } ts._Test "String notation to strand"
{ ğ•¤ â‹„ âŸ¨'b', 'q', 'n'âŸ© â‰¡ "bq" } ts._Test "String notation to list"
{ ğ•¤ â‹„ âˆ â‰¡ "" } ts._Test "Empty string"


ts.Report @
